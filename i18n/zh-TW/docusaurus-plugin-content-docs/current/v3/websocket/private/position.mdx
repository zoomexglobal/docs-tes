---
title: 持倉
sidebar_label: 持倉
sidebar_position: 1
---

訂閱持倉數據的推送

**Topic:** `position`

### 響應參數
| 參數 | 類型 | 說明|
|:----- |:-----|----- |
|id |string |消息id|
|topic |string |Topic名 |
|creationTime |number |消息數據創建時間 |
|data |array |Object |
|> [category](../../enum#category) |string |產品類型|
|> symbol |string |合約名稱 |
|> side |string |持倉方向. `Buy`,`Sell` |
|> size |string |持倉大小 |
|> [positionIdx](../../enum#positionidx) |integer |倉位標識|
|> tradeMode| integer | 交易模式。<ul><li>反向合約 & USDT永續：`0` 全倉，`1` 逐倉</li><li>統一帳戶：該字段無效，總是 `0`，請通過接口查詢帳戶配置查詢帳戶保證金模式</li></ul> |
|> positionValue |string |倉位價值 |
|> riskId |integer |風險限額id.|
|> riskLimitValue |string |風險限額id對應的風險限額度.|
|> entryPrice |string |入場價 |
|> markPrice |string |標記價 |
|> leverage |string |槓桿.|
|> positionBalance | string  |倉位保證金.|
|> autoAddMargin | integer |是否自動追加保證金. `0`: 否, `1`: 是. |
|> positionMM |string |倉位維持保證金。<ul><li>經典帳戶：忽略該字段</li><li>統一帳戶組合保證金模式(PM)下，該字段返回為空字符串</li></ul>|
|> positionIM |string |倉位初始保證金。<ul><li>經典帳戶：忽略該字段</li><li>統一帳戶組合保證金模式(PM)下，該字段返回為空字符串</li></ul>|
|> liqPrice| string  | 倉位強平價格。<ul><li>普通帳戶 & 統一帳戶(開啟逐倉保證金模式)：是逐倉和全倉持倉的真實價格，當強平價 <= minPrice 或者 強平價 >= maxPrice，則為 ""</li><li>統一帳戶(全倉保證金)：是全倉持倉的預估價格（因為統一帳戶模式是按照帳戶維度控制風險率），當強平價 <= minPrice 或者 強平價 >= maxPrice，則為 ""</li><li>對於組合保證金模式，此字段為空，不會提供強平價格</li></ul> |
|> bustPrice |string |預估破產價. |
|> tpslMode |string |該字段廢棄, 無意義, 總是返回"Full". |
|> takeProfit |string |止盈價格 |
|> stopLoss |string |止損價格 |
|> trailingStop |string |追蹤止損|
|> unrealisedPnl |string |未結盈虧 |
|> cumRealisedPnl |string |累計盈虧 |
|> isReduceOnly | boolean | 僅當Zoomex需要降低某個交易對的風險限額時有用。<ul><li>`true`: 僅允許減倉操作。您可以考慮一系列的方式，比如，降低 risk limit 檔位，或者同檔位修改槓桿或減少倉位，或者增加保證金，或者撤單。這些操作做完後，可以主動調用「確認新的風險限額」接口</li><li>`false`(默認): 無交易限制，表示您的倉位在系統調整時處於風險水平之下</li><li>僅對逐倉和全倉的期貨倉位有意義</li></ul> |
|> mmrSysUpdatedTime | string | 僅當Zoomex需要降低某個交易對的風險限額時有用。<ul><li>當 isReduceOnly=`true`: 這個時間戳表示系統強制修改 MMR 的時間</li><li>當 isReduceOnly=`false`: 若不為空，則表示系統已經完成了 MMR 調整的時間</li><li>僅當系統調整才會賦值，對於主動的調整，不會在這裡展示時間戳</li><li>默認為 ""，但如果曾經這個 symbol 有過系統降檔的操作，那麼這裡會顯示上一次操作的時間</li><li>僅對逐倉和全倉的期貨倉位有意義</li></ul> |
|> leverageSysUpdatedTime | string | 僅當Zoomex需要降低某個交易對的風險限額時有用。<ul><li>當 isReduceOnly=`true`: 這個時間戳表示系統強制修改槓桿的時間</li><li>當 isReduceOnly=`false`: 若不為空，則表示系統已經完成了槓桿調整的時間</li><li>僅當系統調整才會賦值，對於主動的調整，不會在這裡展示時間戳</li><li>默認為 ""，但如果曾經這個 symbol 有過系統降檔的操作，那麼這裡會顯示上一次操作的時間</li><li>僅對逐倉和全倉的期貨倉位有意義</li></ul> |
|> [positionStatus](../../enum#positionstatus) |string |倉位狀態. `Normal`,`Liq`, `Adl` |
|> [adlRankIndicator](../../enum#adlrankindicator) |integer |自動減倉燈. <a href="https://www.zoomex.com/zh-TW/help-center/s/article/What-is-Auto-Deleveraging-ADL">什麼是自動減倉機制?</a>|
|> createdTime |string |倉位創建時間戳 (毫秒) |
|> updatedTime |string |倉位數據更新時間戳 (毫秒) |

### 訂閱示例
```json
{
    "op": "subscribe",
    "args": [
        "position"
    ]
}
```

```javascript
var url = require('url');
var WebSocket = require('ws');
var crypto = require('crypto');
var endpoint = "wss://stream-testnet.zoomex.com/v3/private"
console.log('attempting to connect to WebSocket %j', endpoint);
var client = new WebSocket(endpoint);
const apiKey="XXXXXXXXX";
const apiSecret="XXXXXXXXX";
client.on('open', function () {
	console.log('"open" event!');
	console.log('WebSocket Client Connected');
	const expires = new Date().getTime() + 10000;
	const signature = crypto.createHmac("sha256", apiSecret).update("GET/realtime" + expires).digest("hex");
	const payload={
		op: "auth",
		args: [apiKey, expires.toFixed(0), signature],
	}
	client.send(JSON.stringify(payload));
	setInterval(()=>{client.ping()}, 30000);
	client.ping();
	client.send(JSON.stringify({"op": "subscribe", "args": ['position']}));
});

client.on('message', function (data) {
	console.log('"message" event! %j', JSON.parse(Buffer.from(data).toString()));
});
client.on('ping', function (data, flags) {
	console.log("ping received");
});
client.on('pong', function (data, flags) {
	console.log("pong received");
});
```

### 推送示例

```json
{
    "id": "59232430b58efe-5fc5-4470-9337-4ce293b68edd",
    "topic": "position",
    "creationTime": 1672364174455,
    "data": [
        {
            "positionIdx": 0,
            "tradeMode": 0,
            "riskId": 41,
            "riskLimitValue": "200000",
            "symbol": "XRPUSDT",
            "side": "Buy",
            "size": "75",
            "entryPrice": "0.3615",
            "leverage": "10",
            "positionValue": "27.1125",
            "positionBalance": "0",
            "markPrice": "0.3374",
            "positionIM": "2.72589075",
            "positionMM": "0.28576575",
            "takeProfit": "0",
            "stopLoss": "0",
            "trailingStop": "0",
            "unrealisedPnl": "-1.8075",
            "cumRealisedPnl": "0.64782276",
            "createdTime": "1672121182216",
            "updatedTime": "1672364174449",
            "tpslMode": "Full",
            "liqPrice": "",
            "bustPrice": "",
            "category": "linear",
            "positionStatus": "Normal",
            "adlRankIndicator": 2
        }
    ]
}
```

